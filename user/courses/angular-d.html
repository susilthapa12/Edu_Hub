<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AngularJS ‚Äî Filters & Services (EduHub)</title>
  <meta name="description" content="Interactive guide: AngularJS filters (uppercase, currency, date, orderBy, filter) and services ($http example + custom service)." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üìò</text></svg>">

  <!-- Tailwind (utility-first responsive) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Prism JS for syntax highlighting -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-prismjs-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/"></script>

  <!-- AngularJS 1.8.3 (final 1.x line) -->
  <script src="https://code.angularjs.org/1.8.3/angular.min.js"></script>

  <style>
    :root { --brand: #2563eb; --muted: #6b7280; }
    body { font-family: Inter, "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial; }
    pre { background: #f7fafc; padding: 1rem; border-radius: .5rem; overflow:auto; position:relative; border:1px solid #e6edf3; }
    code { font-family: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; font-size: .95rem; color: #111827; }
    .copy-btn { position:absolute; top:.6rem; right:.6rem; background:var(--brand); color:white; padding:.35rem .6rem; border-radius:.375rem; font-size:.8rem; cursor:pointer; border:none; }
    .toc a.active { color: var(--brand); font-weight:700; }
    .kbd { display:inline-block; padding:.08rem .35rem; border:1px solid #d1d5db; border-bottom-width:2px; border-radius:.35rem; font-size:.75rem; background:#fff; }
    /* responsive code block spacing on mobile */
    @media (max-width: 640px){ pre { font-size:.92rem; } }
  </style>
</head>

<body ng-app="eduApp" class="bg-white text-gray-900 min-h-screen flex flex-col">

  <!-- Skip link -->
  <a href="#content" class="sr-only focus:not-sr-only focus:absolute focus:top-3 focus:left-3 bg-white text-gray-900 px-3 py-2 rounded shadow font-semibold">Skip to content</a>

  <!-- Header -->
  <header class="bg-blue-700 text-white sticky top-0 z-40 shadow">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center gap-4">
      <a href="index.html" class="text-2xl font-extrabold">EduHub</a>
      <span class="text-white/90 hidden sm:inline">/ AngularJS Filters & Services</span>

      <div class="ml-auto flex items-center gap-2">
        <div class="relative">
          <input id="search" type="search" placeholder="Filter sections (press /)"
            class="w-44 md:w-64 rounded-md px-3 py-2 text-sm text-gray-900 placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-white/40" />
          <kbd class="absolute right-2 top-1/2 -translate-y-1/2 kbd">/</kbd>
        </div>
        <button id="printBtn" class="hidden sm:inline-block bg-white/20 hover:bg-white/30 px-3 py-2 rounded-md text-sm font-semibold">Print</button>
      </div>
    </div>
  </header>

  <!-- top EOL notice -->
  <div class="bg-amber-100 text-amber-900 text-sm font-medium">
    <div class="max-w-6xl mx-auto px-4 py-2">
      ‚ö†Ô∏è AngularJS entered long-term/end-of-life status ‚Äî no longer actively supported by the Angular team. Use for learning/legacy maintenance only.
    </div>
  </div>

  <!-- Main layout -->
  <div class="max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-[220px_1fr] gap-8 flex-1" id="content">

    <!-- Sidebar / TOC -->
    <aside class="hidden lg:block sticky top-24 self-start">
      <nav class="toc text-sm space-y-3 bg-white p-4 rounded-md border">
        <p class="uppercase text-gray-500 tracking-wide text-xs mb-2">On this page</p>
        <ul class="space-y-2">
          <li><a href="#filters" class="block hover:underline">Filters (live demo)</a></li>
          <li><a href="#custom-filter" class="block hover:underline">Custom filter</a></li>
          <li><a href="#services" class="block hover:underline">Services & $http</a></li>
          <li><a href="#summary" class="block hover:underline">Summary</a></li>
        </ul>
        <hr class="my-3" />
        <p class="text-xs text-gray-600">Shortcuts:</p>
        <p class="text-xs"><span class="kbd">/</span> focus search ¬∑ <span class="kbd">g</span> top</p>
      </nav>
    </aside>

    <!-- Main content -->
    <main class="space-y-10">

      <!-- nav -->
      <nav class="flex justify-between items-center">
        <a href="angular-c.html" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 font-semibold">‚óÄ Previous</a>
        <a href="angular-e.html" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 font-semibold">Next ‚ñ∂</a>
      </nav>

      <!-- FILTERS SECTION -->
      <section id="filters" class="scroll-mt-20" ng-controller="FiltersCtrl">
        <h1 class="text-3xl font-extrabold mb-2">AngularJS Filters ‚Äî live examples</h1>
        <p class="text-gray-700 max-w-2xl mb-4 font-medium">
          Filters format expression output for display. Common built-ins: <code>uppercase</code>, <code>lowercase</code>, <code>currency</code>, <code>date</code>, <code>orderBy</code>, and <code>filter</code>. (Docs: $filter API.)
        </p>

        <!-- Live inputs -->
        <div class="grid gap-4 md:grid-cols-2">
          <div class="rounded-md border p-4 bg-gray-50">
            <p class="font-semibold mb-2">Basic formatting</p>
            <label class="block mb-2">
              <span class="text-sm font-medium">Name</span>
              <input ng-model="name" class="mt-1 w-full rounded-md border px-3 py-2" placeholder="Type a name">
            </label>
            <label class="block mb-2">
              <span class="text-sm font-medium">Amount (number)</span>
              <input type="number" ng-model="amount" class="mt-1 w-full rounded-md border px-3 py-2" step="0.01">
            </label>
            <label class="block">
              <span class="text-sm font-medium">Date</span>
              <input type="date" ng-model="dateVal" class="mt-1 w-full rounded-md border px-3 py-2">
            </label>

            <div class="mt-3 text-sm space-y-1">
              <div><strong>Uppercase:</strong> <span class="ml-2">{{ name | uppercase }}</span></div>
              <div><strong>Lowercase:</strong> <span class="ml-2">{{ name | lowercase }}</span></div>
              <div><strong>Currency:</strong> <span class="ml-2">{{ amount | currency }}</span></div>
              <div><strong>Date (medium):</strong> <span class="ml-2">{{ dateVal | date:'mediumDate' }}</span></div>
            </div>
          </div>

          <div class="rounded-md border p-4 bg-gray-50">
            <p class="font-semibold mb-2">Arrays + orderBy + filter</p>
            <label class="block mb-2">
              <span class="text-sm font-medium">Search items</span>
              <input ng-model="itemQuery" placeholder="search product" class="mt-1 w-full rounded-md border px-3 py-2">
            </label>

            <ul class="mt-3 space-y-2 text-sm">
              <li class="text-gray-700 font-medium">Products (sorted by price):</li>
              <li ng-repeat="it in items | filter:itemQuery | orderBy:'price' track by $index"
                  class="flex justify-between items-center bg-white rounded-md border p-2">
                <span>{{ it.name }}</span>
                <span class="text-sm">{{ it.price | currency }}</span>
              </li>
            </ul>
          </div>
        </div>

        <!-- Code snippet (escaped so page shows code) -->
        <div class="mt-6 relative">
          <pre><button class="copy-btn" aria-label="Copy code">Copy</button><code class="language-html">&lt;!-- usage examples inside a controller --&gt;
&lt;input ng-model=&quot;name&quot;&gt;
&lt;!-- uppercase, currency, date --&gt;
&lt;p&gt;Upper: {{ name | uppercase }} &lt;/p&gt;
&lt;p&gt;Amount: {{ amount | currency }} &lt;/p&gt;
&lt;p&gt;Date: {{ dateVal | date:'mediumDate' }} &lt;/p&gt;

&lt;!-- array filter + orderBy --&gt;
&lt;li ng-repeat=&quot;it in items | filter:itemQuery | orderBy:'price'&quot;&gt;{{it.name}} ‚Äî {{it.price | currency}}&lt;/li&gt;</code></pre>
        </div>
      </section>

      <!-- CUSTOM FILTER -->
      <section id="custom-filter" class="scroll-mt-20">
        <h2 class="text-2xl font-bold mb-2">Custom filter example</h2>
        <p class="text-gray-700 mb-3">A small custom filter that reverses a string (example only).</p>

        <div class="rounded-md border p-4 bg-gray-50 md:w-1/2">
          <label class="block mb-3">
            <span class="text-sm font-medium">Enter text</span>
            <input ng-model="revText" class="mt-1 w-full rounded-md border px-3 py-2" placeholder="Type to see reversed text">
          </label>
          <p class="font-medium">Reversed: <span class="ml-2">{{ revText | reverse }}</span></p>
        </div>

        <div class="mt-4 relative">
          <pre><button class="copy-btn">Copy</button><code class="language-javascript">// register filter
angular.module('eduApp').filter('reverse', function(){
  return function(input){
    if (!input) return '';
    return input.split('').reverse().join('');
  };
});</code></pre>
        </div>
      </section>

      <!-- SERVICES SECTION -->
      <section id="services" class="scroll-mt-20" ng-controller="ServicesCtrl as svc">
        <h2 class="text-2xl font-bold mb-2">Services & <code>$http</code> example</h2>
        <p class="text-gray-700 mb-3">A simple service wrapping <code>$http</code> to fetch users from a public placeholder API (demo only).</p>

        <div class="rounded-md border p-4 bg-gray-50">
          <div ng-if="loading" class="text-sm text-gray-600">Loading users‚Ä¶</div>
          <div ng-if="error" class="text-sm text-red-600">Failed to fetch users.</div>

          <ul ng-if="!loading && !error" class="space-y-2 mt-2">
            <li ng-repeat="u in users | orderBy:'name'" class="flex justify-between items-center bg-white p-2 rounded-md border">
              <div>
                <div class="font-medium">{{u.name}}</div>
                <div class="text-xs text-gray-600">{{u.email}}</div>
              </div>
              <div class="text-sm">{{u.address.city}}</div>
            </li>
          </ul>

          <div class="mt-3">
            <button ng-click="reload()" class="bg-blue-600 text-white px-3 py-2 rounded-md font-semibold hover:bg-blue-700">Reload</button>
          </div>
        </div>

        <div class="mt-4 relative">
          <pre><button class="copy-btn">Copy</button><code class="language-javascript">// service (factory) + controller example
angular.module('eduApp').service('UserService', function($http){
  this.getUsers = function(){
    // returns the $http promise
    return $http.get('https://jsonplaceholder.typicode.com/users');
  };
});

angular.module('eduApp').controller('ServicesCtrl', function($scope, UserService){
  $scope.users = [];
  $scope.loading = true;
  $scope.error = false;

  function load(){
    $scope.loading = true;
    $scope.error = false;
    UserService.getUsers()
      .then(function(res){ $scope.users = res.data; })
      .catch(function(){ $scope.error = true; })
      .finally(function(){ $scope.loading = false; });
  }

  $scope.reload = load;
  load();
});</code></pre>
        </div>
      </section>

      <!-- SUMMARY -->
      <section id="summary" class="scroll-mt-20">
        <h2 class="text-2xl font-bold mb-2">Summary</h2>
        <ul class="list-disc ml-6 space-y-2 text-gray-800 font-medium">
          <li>Filters format display values. Built-ins include <code>uppercase</code>, <code>currency</code>, <code>date</code>, <code>orderBy</code>, and <code>filter</code>. (<em>see $filter API</em>)</li>
          <li>Services (factories/service) wrap reusable logic and often return the $http promise for callers to consume. Use <code>.then</code>/<code>.catch</code> to handle results.</li>
        </ul>
      </section>

      <!-- bottom nav -->
      <nav class="flex justify-between">
        <a href="angular-c.html" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 font-semibold">‚óÄ Previous</a>
        <a href="angular-e.html" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 font-semibold">Next ‚ñ∂</a>
      </nav>
    </main>
  </div>

  <!-- Footer -->
  <footer class="bg-blue-700 text-white py-6 mt-auto text-center font-semibold">
    <div class="max-w-6xl mx-auto px-4">¬© 2025 Susil. All rights reserved.</div>
  </footer>

  <!-- Back to top -->
  <button id="toTop" class="fixed bottom-5 right-5 hidden rounded-full p-3 shadow-lg bg-blue-600 text-white hover:bg-blue-700" aria-label="Back to top">‚Üë</button>

  <!-- APPLICATION SCRIPTS (live functionality + controllers/services) -->
  <script>
    // Angular module + demo filter + service + controllers
    angular.module('eduApp', [])
      .filter('reverse', function(){
        return function(input){
          if (!input) return '';
          return ('' + input).split('').reverse().join('');
        };
      })
      .service('UserService', function($http){
        this.getUsers = function(){
          // returns the $http promise - handle in caller
          return $http.get('https://jsonplaceholder.typicode.com/users');
        };
      })
      .controller('FiltersCtrl', function($scope){
        $scope.name = 'Mohan Thapa';
        $scope.amount = 1234.56;
        $scope.dateVal = (new Date()).toISOString().slice(0,10); // yyyy-mm-dd for <input type=date>
        $scope.itemQuery = '';
        $scope.revText = 'reverse me';
        $scope.items = [
          {name:'Apple', price:1.25},
          {name:'Banana', price:0.65},
          {name:'Coffee', price:3.50},
          {name:'Donut', price:0.99},
          {name:'Eggs (dozen)', price:2.99}
        ];
      })
      .controller('ServicesCtrl', function($scope, UserService){
        $scope.users = [];
        $scope.loading = true;
        $scope.error = false;

        function load(){
          $scope.loading = true;
          $scope.error = false;
          UserService.getUsers()
            .then(function(res){
              $scope.users = res.data || [];
            })
            .catch(function(err){
              console.error('User fetch error', err);
              $scope.error = true;
            })
            .finally(function(){
              $scope.loading = false;
            });
        }
        $scope.reload = load;
        load();
      });

    // --- UI helpers (copy, search, toc, print, keyboard shortcuts) ---
    document.addEventListener('click', function(e){
      const btn = e.target.closest('.copy-btn');
      if (!btn) return;
      const code = btn.parentElement.querySelector('code');
      if (!code) return;
      navigator.clipboard.writeText(code.innerText).then(function(){
        const orig = btn.textContent;
        btn.textContent = 'Copied!';
        btn.style.backgroundColor = '#16a34a';
        setTimeout(function(){ btn.textContent = orig; btn.style.backgroundColor = 'var(--brand)'; }, 1200);
      }).catch(()=>{ alert('Unable to copy'); });
    });

    // Search filter for sections/TOC focus
    const search = document.getElementById('search');
    search.addEventListener('input', function(){
      const q = search.value.trim().toLowerCase();
      document.querySelectorAll('main section').forEach(function(sec){
        const txt = sec.innerText.toLowerCase();
        sec.style.display = (!q || txt.indexOf(q) !== -1) ? '' : 'none';
      });
    });

    // Print
    document.getElementById('printBtn').addEventListener('click', function(){ window.print(); });

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e){
      if (e.key === '/') { e.preventDefault(); search.focus(); }
      if (e.key.toLowerCase() === 'g') { window.scrollTo({top:0, behavior:'smooth'}); }
    });

    // TOC scrollspy (simple)
    const tocLinks = document.querySelectorAll('aside a, .toc a');
    const sections = Array.from(document.querySelectorAll('main section[id]'));
    const observer = new IntersectionObserver(function(entries){
      entries.forEach(function(entry){
        if (entry.isIntersecting) {
          tocLinks.forEach(a => a.classList.remove('active'));
          const link = document.querySelector('a[href="#' + entry.target.id + '"]');
          if (link) link.classList.add('active');
        }
      });
    }, { rootMargin: '-30% 0px -60% 0px', threshold: [0, 0.5, 1] });
    sections.forEach(s => observer.observe(s));

    // Back to top toggle
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', function(){
      if (window.scrollY > 300) toTop.classList.remove('hidden'); else toTop.classList.add('hidden');
    });
    toTop.addEventListener('click', function(){ window.scrollTo({ top:0, behavior:'smooth' }); });

    // Initialize Prism highlighting (if needed)
    document.addEventListener('DOMContentLoaded', function(){
      if (window.Prism) Prism.highlightAll();
    });
  </script>
</body>
</html>
